if [ -x /usr/local/bin/python3.11 ]; then
  # it's probably freebsd
  PYTHON=/usr/local/bin/python3.11
  sudo pkg install -y rust
elif [ -x /usr/bin/python ]; then
  PYTHON=/usr/bin/python
fi

if [ -z "$PYTHON" ]; then
  echo "No suitable Python interpreter found."
  exit 1
fi

PATH_SCRIPT=`dirname "$0"`
cd "$PATH_SCRIPT/.."

echo "- Removing existing venv/"
rm -rf venv

echo "- Installing venv/"
$PYTHON -m venv venv

echo "- Installing Python dependencies"
./venv/bin/python3 -m pip install --upgrade pip
./venv/bin/pip3 install -r conf/requirements.txt
# ./bin/pip-install-requirements